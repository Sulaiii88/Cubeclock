<!DOCTYPE html>
<html lang="de">
  <head>
    <!-- Zeichencodierung -->
    <meta charset="UTF-8" />
    <title>Zeitwürfel</title>

    <!-- Google Font: Space Mono für digitalen Look -->
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Mono&display=swap"
      rel="stylesheet"
    />

    <!-- PWA-Integration -->
<link rel="manifest" href="manifest.json" />
<meta name="theme-color" content="#000000" />
<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('sw.js');
  }
</script>


    <style>
      /* === Grundlayout der Seite === */
      body {
        margin: 0;
        background: #000; /* schwarzer Hintergrund */
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        height: 100vh; /* 100% der Bildschirmhöhe */
        font-family: "Space Mono", monospace;
      }

      /* === Szene: Sichtfeld für den Würfel mit Perspektive === */
      .scene {
        width: 300px;
        height: 300px;
        perspective: 1000px; /* Tiefenwirkung für 3D */
      }

      /* === Der Würfel selbst === */
      .cube {
        width: 300px;
        height: 300px;
        position: relative;
        transform-style: preserve-3d; /* 3D beibehalten */
        transition: transform 1s ease; /* weicher Übergang */
        transform: rotateX(-30deg) rotateY(45deg); /* Startrotation */
      }

      /* === Einzelne Seiten (Flächen) des Würfels === */
      .face {
        position: absolute;
        width: 300px;
        height: 300px;
        background: linear-gradient(
          to bottom right,
          #000,
          #111
        ); /* dunkler Verlauf */
        color: #fff;
        font-size: 260px; /* große Zahlen */
        letter-spacing: -5px;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 1px solid #424141; /* sichtbarer Rand */
        backface-visibility: hidden; /* Rückseite ausblenden */
        -webkit-backface-visibility: hidden;
        -moz-backface-visibility: hidden;
      }

      /* === Text nicht auswählbar === */
      .scene,
      .cube,
      .face {
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        outline: none;
      }

      /* === Farben für jede Seite individuell === */
      #hours {
        color: #e71f1b;
      } /* Stunden: Rot */
      #minutes {
        color: #ff8c42;
      } /* Minuten: Orange */
      #seconds {
        color: #fff275;
      } /* Sekunden: Gelb */
      #year {
        color: #4b0082;
      } /* Jahr: Dunkellila */
      #day {
        color: #87c8fa;
      } /* Tag: Hellblau */

      /* === Monatsanzeige etwas kleiner und fett === */
      #month {
        color: #2f4fba;
        font-size: 180px;
        font-family: "Space Mono", monospace;
        font-weight: bold;
      }

      /* === 3D-Position jeder Würfelseite === */
      .front {
        transform: rotateY(90deg) translateZ(150px) rotateY(180deg)
          rotateX(180deg);
      } /* Jahr */
      .back {
        transform: rotateY(180deg) translateZ(150px) rotateY(180deg)
          rotateX(180deg);
      } /* Monat */
      .right {
        transform: rotateY(0deg) translateZ(150px);
      } /* Sekunden */
      .left {
        transform: rotateY(-90deg) translateZ(150px);
      } /* Minuten */
      .top {
        transform: rotateX(90deg) translateZ(150px);
      } /* Stunden */
      .bottom {
        transform: rotateX(-90deg) translateZ(150px);
      } /* Tag */

      /* === Button zum manuellen Umschalten === */
      button {
        position: absolute;
        background: transparent;
        margin-top: 600px;
        padding: 1px 120px;
        border: none;
        outline: none;
        box-shadow: none;
        border-radius: 10px;
        background-color: #444;
        cursor: pointer;
      }

      button:hover {
        background-color: #666;
      }

      /* === Bild im Button (Spacebar-Symbol) === */
      button img {
        width: 30px;
        height: auto;
        display: block;
      }

      /* === Anpassung für kleinere Bildschirme === */
      @media (max-width: 600px) {
        .scene,
        .cube,
        .face {
          width: 150px;
          height: 150px;
        }

        .face {
          font-size: 110px;
        }

        button {
          font-size: 14px;
          padding: 8px 16px;
        }
      }
    </style>
  </head>

  <body>
    <!-- Würfel-Szene mit 6 Flächen -->
    <div class="scene">
      <div class="cube" id="cube">
        <div class="face front" id="year">00</div>
        <div class="face back" id="month">00</div>
        <div class="face right" id="seconds">00</div>
        <div class="face left" id="minutes">00</div>
        <div class="face top" id="hours">00</div>
        <div class="face bottom" id="day">00</div>
      </div>
    </div>

    <!-- Button zum Umschalten zwischen Uhrzeit/Datum -->
    <button onclick="toggleCube()">
      <img src="spacebar_icon.png" alt="Leertaste" />
    </button>

    <script>
      // === Variablen zur Steuerung ===
      let showingDate = false; // true = Datum, false = Uhrzeit
      let rotateX = -30;
      let rotateY = 45;
      let isDragging = false;
      let lastX, lastY;
      let userRotated = false; // erkennt Benutzerdrehung
      let inactivityTimer;

      const cube = document.getElementById("cube");

      // === Uhrzeit & Datum aktualisieren ===
      function updateTime() {
        const now = new Date();
        const monthNames = [
          "Jan",
          "Feb",
          "Mär",
          "Apr",
          "Mai",
          "Jun",
          "Jul",
          "Aug",
          "Sep",
          "Okt",
          "Nov",
          "Dez",
        ];

        // Einzelne Werte formatieren & einsetzen
        document.getElementById("hours").textContent = now
          .getHours()
          .toString()
          .padStart(2, "0");
        document.getElementById("minutes").textContent = now
          .getMinutes()
          .toString()
          .padStart(2, "0");
        document.getElementById("seconds").textContent = now
          .getSeconds()
          .toString()
          .padStart(2, "0");
        document.getElementById("year").textContent = (now.getFullYear() % 100)
          .toString()
          .padStart(2, "0");
        document.getElementById("month").textContent =
          monthNames[now.getMonth()];
        document.getElementById("day").textContent = now
          .getDate()
          .toString()
          .padStart(2, "0");
      }

      // === Ansicht umschalten (via Taste oder Button) ===
      function toggleCube() {
        showingDate = !showingDate;
        rotateX = showingDate ? -215 : -30;
        rotateY = 45;
        cube.style.transform = `rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
      }

      // === Automatisch zurück zur Uhrzeitansicht ===
      function resetToClockView() {
        if (showingDate || userRotated) {
          showingDate = false;
          userRotated = false;
          rotateX = -30;
          rotateY = 45;
          cube.style.transform = `rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
        }
      }

      // === Timer für Inaktivität starten/zurücksetzen ===
      function startInactivityTimer() {
        clearTimeout(inactivityTimer);
        inactivityTimer = setTimeout(resetToClockView, 10000); // nach 10 Sekunden
      }

      // === Benutzer bewegt Würfel mit der Maus ===
      cube.addEventListener("mousedown", (e) => {
        isDragging = true;
        lastX = e.clientX;
        lastY = e.clientY;
      });

      document.addEventListener("mouseup", () => {
        isDragging = false;
      });

      document.addEventListener("mousemove", (e) => {
        if (!isDragging) return;

        const dx = e.clientX - lastX;
        const dy = e.clientY - lastY;
        lastX = e.clientX;
        lastY = e.clientY;

        rotateY += dx * 0.5;
        rotateX -= dy * 0.5;

        cube.style.transform = `rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;

        userRotated = true; // Nutzer hat den Würfel bewegt
        startInactivityTimer(); // Timer startet neu
      });

      // === Space-Taste zum Umschalten verwenden ===
      window.addEventListener("keydown", (e) => {
        if (
          e.code === "Space" &&
          !e.target.matches("button, input, textarea")
        ) {
          e.preventDefault();
          toggleCube();
        }
      });

      // === Uhrzeit kontinuierlich aktualisieren ===
      setInterval(updateTime, 1000);
      updateTime();
    </script>
  </body>
</html>

